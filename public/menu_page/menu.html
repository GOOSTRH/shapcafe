<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="menu.css">
    <title>Menu / SHAPCafeOnline</title>

    <link rel="shortcut icon" href="#" />
    <script> // |--- this line of code is for favion.ico error prevention, do not delete</script>

</head>

<div class="background"></div>

<div class="TopDiv">
    <section class="LogoNav">
        <a class="LogoBtn" type="button" id="LogoBtn" href="../home_page/home.html">
            <img class="Logo" src="../Logo.png" alt="Go to Homepage">
        </a>
    </section>
    <div class="header1">Menus</div> 
    <section class="nav">
        <a class='maindish btn' href="menu.html">Dish</a>
        <a class='sidedish btn' href="menusd.html">Side Dish</a>
        <a class='other btn' href="menuo.html">Other</a>
    </section>
</div>


<body class="body">

    

    <section class="main">
        <div class="dish">

            <h1 class="header2">Dish</h1>
            
            <hr>
            <h1>food 1</h1>
            <p class="desc">
                food 1 is made with your mom, your dad, your grandma, your grandpa
            </p>
            <p2 class="price">75₱</p2>
            <br>
            <button class="AddToCart" onclick="addToCart('food 1', 75)">Add to Cart</button>
            <hr>

            <h1>food 2</h1>
            <p class="desc">
                food 2 is made with his mom, his dad, hid grandma, his grandpa
            </p>
            <p2 class="price">40₱</p2>
            <br>
            <button class="AddToCart" onclick="addToCart('food 2', 40)">Add to Cart</button>
            <hr>

            <h1>food 3</h1>
            <p class="desc">
                food 3 is made with her mom, her dad, her grandma, her grandpa
            </p>
            <p2 class="price">80₱</p2>
            <br>
            <button class="AddToCart" onclick="addToCart('food 3', 80)">Add to Cart</button>
            <hr>

            <h1>food 4</h1>
            <p class="desc">
                food 4 is made with its mom, its dad, its grandma, its grandpa
            </p>
            <p2 class="price">90₱</p2>
            <br>
            <button class="AddToCart" onclick="addToCart('food 4', 90)">Add to Cart</button>
            <hr>

        </div>
    </section>

    <section class="ordermain">
        <div class="ordercontainer">

            <h1 class="orderheader">Shopping Cart</h2>

            <hr>
            
            <table id="cart-table">
                <thead>
                    <tr>
                        <th>Product</th>
                        <th>Quantity</th>
                        <th>Total</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="cart-items">
                    <!-- Cart items will be dynamically generated here -->
                </tbody>
            </table>
        </div>
    </section>






<script>
    function addToCart(name, price) {
        let cart = getCookie('cart') ? JSON.parse(getCookie('cart')) : [];
        let existingItemIndex = cart.findIndex(item => item.name === name);
        if (existingItemIndex !== -1) {
            cart[existingItemIndex].quantity++;
        } else {
            cart.push({ name, price, quantity: 1 });
        }
        document.cookie = `cart=${JSON.stringify(cart)}; expires=${new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toUTCString()}; path=/`;
        renderCart();
    }

    function getCookie(name) {
        const decodedCookie = decodeURIComponent(document.cookie);
        const cookies = decodedCookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            let cookie = cookies[i];
            while (cookie.charAt(0) === ' ') {
                cookie = cookie.substring(1);
            }
            if (cookie.indexOf(name) === 0) {
                return cookie.substring(name.length + 1, cookie.length);
            }
        }
        return "";
    }
</script>


<script>
    // Render cart items
    function renderCart() {
        const cartItemsContainer = document.getElementById('cart-items');
        cartItemsContainer.innerHTML = '';

        let cart = getCookie('cart') ? JSON.parse(getCookie('cart')) : [];
        let totalPrice = 0;

        cart.forEach((item, index) => {
            const total = item.price * item.quantity;
            totalPrice += total;

            const row = `
                <tr>
                    <td><p class="name">${item.name}</p></td>
                    <td><input class="quan" type="number" value="${item.quantity}" min="1" onchange="updateQuantity(${index}, this.value)"></td>
                    <td><p class="ttl">₱${total}</p></td>
                    <td><a class="rmv" onclick="removeFromCart(${index})">
                        <img class="DeleteItemIcon" src="../DeleteItem.png" alt="Remove Item">
                        </a></td>
                </tr>
            `;
            cartItemsContainer.innerHTML += row;
        });

        // Display total price
        const totalRow = `
            <tr>
                <td colspan="3">Total:</td>
                <td>₱${totalPrice}</td>
                <td></td>
            </tr>
        `;
        cartItemsContainer.innerHTML += totalRow;
    }

    // Function to get a cookie
    function getCookie(name) {
        const decodedCookie = decodeURIComponent(document.cookie);
        const cookies = decodedCookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            let cookie = cookies[i];
            while (cookie.charAt(0) === ' ') {
                cookie = cookie.substring(1);
            }
            if (cookie.indexOf(name) === 0) {
                return cookie.substring(name.length + 1, cookie.length);
            }
        }
        return "";
    }

    // Remove item from cart
    function removeFromCart(index) {
        let cart = getCookie('cart') ? JSON.parse(getCookie('cart')) : [];
        cart.splice(index, 1);
        document.cookie = `cart=${JSON.stringify(cart)}; expires=${new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toUTCString()}; path=/`;
        renderCart();
    }

    // Update quantity of an item in the cart
    function updateQuantity(index, newQuantity) {
        let cart = getCookie('cart') ? JSON.parse(getCookie('cart')) : [];
        cart[index].quantity = parseInt(newQuantity);
        document.cookie = `cart=${JSON.stringify(cart)}; expires=${new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toUTCString()}; path=/`;
        renderCart();
    }

    // Render the initial cart items when the page loads
    renderCart();
</script>

<script> // This is a function loader, it loads when the website is fully loaded
        document.addEventListener("DOMContentLoaded", function() {
            renderCart();
        });
</script>

</body>
</html>